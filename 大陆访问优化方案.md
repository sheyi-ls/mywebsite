# 🌐 解决大陆访问 Vercel 问题的完整方案

## 问题现状
- `.vercel.app` 域名在中国大陆访问不稳定
- 需要通过自定义域名解决访问问题
- 要保证海外和国内用户都能正常访问

## 解决方案对比

### 方案一：基础域名解析 ⭐⭐⭐
**费用**: ¥55-79/年 (仅域名费用)
**难度**: ⭐⭐
**效果**: 中等

**配置步骤**:
```bash
1. 购买域名 (GoDaddy/阿里云)
2. DNS 解析指向 Vercel IP
3. Vercel 绑定自定义域名
```

**DNS 配置**:
```bash
A    @       76.76.19.61
A    www     76.76.19.61  
A    blog    76.76.19.61
A    app     76.76.19.61
```

### 方案二：Cloudflare 加速 ⭐⭐⭐⭐⭐
**费用**: ¥55-79/年 (仅域名费用)
**难度**: ⭐⭐⭐
**效果**: 最佳

**优势**:
- 全球 CDN 加速
- 中国大陆路由优化
- 免费 SSL 证书
- 自动缓存优化
- DDoS 防护

**配置步骤**:
```bash
1. 购买域名
2. 域名 NS 服务器改为 Cloudflare
3. 添加 DNS 记录并开启代理
4. 在 Vercel 绑定域名
```

### 方案三：国内备案 + 双线部署 ⭐⭐⭐⭐
**费用**: ¥300-800/年
**难度**: ⭐⭐⭐⭐⭐
**效果**: 完美 (中国用户)

**配置**:
```bash
海外: Vercel
国内: 阿里云 OSS + CDN
DNS: 智能解析分流
```

## 推荐实施步骤

### 第1步：购买域名 + Cloudflare (推荐)

**立即执行**:
```bash
1. 注册 Cloudflare 账户 (免费)
2. 购买域名 (推荐 Namecheap/GoDaddy)
3. 将域名 DNS 迁移到 Cloudflare
```

**DNS 配置**:
```bash
类型    名称    值                      代理状态
A      @      76.76.19.61            🟠 已代理
A      www    76.76.19.61            🟠 已代理  
A      blog   76.76.19.61            🟠 已代理
A      app    76.76.19.61            🟠 已代理
```

### 第2步：Vercel 绑定域名

```bash
1. Vercel 控制台 → Settings → Domains
2. 添加购买的域名
3. 验证 DNS 配置
4. 等待 SSL 证书生成
```

### 第3步：测试访问

**测试清单**:
```bash
✅ 海外访问: yoursite.com
✅ 大陆访问: yoursite.com  
✅ HTTPS: https://yoursite.com
✅ 子域名: blog.yoursite.com
✅ 移动端: 手机浏览器测试
```

## 针对不同预算的建议

### 💰 预算有限 (¥0)
**方案**: 先用 .vercel.app 域名
- 海外用户正常访问
- 大陆用户可能需要科学上网
- 后续再购买域名

### 💰 小预算 (¥55-79/年)  
**方案**: 域名 + 基础 DNS
- 购买域名
- GoDaddy/阿里云 DNS 解析
- 基本解决大陆访问问题

### 💰 标准预算 (¥55-79/年)
**方案**: 域名 + Cloudflare (最推荐)
- 购买域名  
- Cloudflare 免费 CDN
- 最佳性价比，效果最好

### 💰 充足预算 (¥300-800/年)
**方案**: 备案 + 双线部署
- 国内备案域名
- 双线部署 (国内+海外)
- 完美用户体验

## 具体操作指南

### Cloudflare 配置详细步骤

**1. 注册 Cloudflare**
```bash
访问: https://cloudflare.com
注册免费账户
```

**2. 添加域名**
```bash
Add Site → 输入域名 → 选择免费计划
```

**3. 更改 NS 服务器**
```bash
在域名注册商处修改 NS 服务器为:
john.ns.cloudflare.com
maya.ns.cloudflare.com
(Cloudflare 会提供具体的)
```

**4. 配置 DNS 记录**
```bash
DNS → Records → Add record
类型: A
名称: @ 
IPv4: 76.76.19.61
代理状态: 🟠 已代理 (重要!)
```

**5. SSL 设置**
```bash
SSL/TLS → 概述 → 加密模式选择 "完全"
```

### 验证配置成功

**DNS 传播检查**:
```bash
网站: https://dnschecker.org
输入域名检查全球 DNS 传播状态
```

**访问速度测试**:
```bash
网站: https://ping.pe  
测试全球访问速度
```

## 常见问题解决

### Q: 域名解析后仍无法访问？
```bash
A: 检查以下项目:
1. DNS 传播是否完成 (24-48小时)
2. Vercel 是否正确绑定域名
3. SSL 证书是否生成完成
4. 本地 DNS 缓存清理
```

### Q: 大陆访问仍然很慢？
```bash
A: 优化方案:
1. 确认 Cloudflare 代理已开启
2. 配置页面规则优化缓存
3. 考虑国内备案 + 镜像部署
```

### Q: Cloudflare 设置后网站打不开？
```bash
A: 排查步骤:
1. SSL 模式改为 "灵活" 试试
2. 关闭代理状态 (灰色云朵) 测试
3. 检查 Vercel 域名配置是否正确
```